{"version":3,"sources":["components/SearchPerson.js","services/person.js","components/PersonForm.js","components/Persons.js","components/Notification.js","components/App.js","index.js"],"names":["SearchPerson","props","onChange","event","filteredPersons","persons","filter","item","name","toLowerCase","includes","target","value","setShownPersons","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonForm","useState","number","newPerson","setNewPerson","onSubmit","preventDefault","PersonObject","console","log","map","elem","window","confirm","person","personService","setPersons","concat","catch","error","setMessage","type","msg","find","setTimeout","Persons","shownPersons","handleOnClick","resp","key","onClick","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useEffect","allPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.494d7696.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst SearchPerson = props => {\r\n  const handleSearchFilterOnChange = event => {\r\n    const filteredPersons = props.persons.filter(item =>\r\n      item.name.toLowerCase().includes(event.target.value)\r\n    );\r\n    props.setShownPersons(filteredPersons);\r\n  };\r\n  return (\r\n    <div>\r\n      <p>\r\n        filter shown with\r\n        <input onChange={handleSearchFilterOnChange} />\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPerson;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, remove };\r\n","import React, { useState } from \"react\";\r\nimport personService from \"../services/person\";\r\n\r\nconst PersonForm = props => {\r\n  const [newPerson, setNewPerson] = useState({\r\n    name: \"\",\r\n    number: \"\"\r\n  });\r\n  const handleOnChangeName = event =>\r\n    setNewPerson({ name: event.target.value, number: newPerson.number });\r\n\r\n  const handleOnChangeNumber = event =>\r\n    setNewPerson({ name: newPerson.name, number: event.target.value });\r\n\r\n  const addPerson = event => {\r\n    event.preventDefault();\r\n    const PersonObject = {\r\n      name: newPerson.name,\r\n      number: newPerson.number\r\n    };\r\n    console.log(PersonObject.id);\r\n    if (props.persons.map(elem => elem.name).includes(newPerson.name)) {\r\n      if (\r\n        window.confirm(\r\n          `${newPerson.name} is already added to the phonebook, replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        PersonObject.id = props.persons.filter(\r\n          person => person.name === newPerson.name\r\n        )[0].id;\r\n\r\n        personService\r\n          .update(\r\n            props.persons.filter(person => person.name === newPerson.name)[0]\r\n              .id,\r\n            PersonObject\r\n          )\r\n          .then(response => {\r\n            console.log(response);\r\n            props.setPersons(\r\n              props.persons\r\n                .filter(person => person.name !== newPerson.name)\r\n                .concat(response)\r\n            );\r\n            props.setShownPersons(\r\n              props.persons\r\n                .filter(person => person.name !== newPerson.name)\r\n                .concat(response)\r\n            );\r\n          })\r\n          .catch(error => {\r\n            props.setMessage({\r\n              type: \"error\",\r\n              msg: `Information of ${\r\n                props.persons.find(person => person.name === newPerson.name)\r\n                  .name\r\n              } has already been removed from the server!`\r\n            });\r\n            setTimeout(() => {\r\n              props.setMessage(null);\r\n            }, 5000);\r\n          });\r\n      }\r\n    } else {\r\n      personService\r\n        .create(PersonObject)\r\n        .then(person => {\r\n          console.log(person);\r\n          console.log(`added id ${person.id} to server`);\r\n          props.setPersons(props.persons.concat(person));\r\n          props.setShownPersons(props.persons.concat(person));\r\n          props.setMessage({\r\n            type: \"success\",\r\n            msg: `Added ${person.name}`\r\n          });\r\n          setTimeout(() => {\r\n            props.setMessage(null);\r\n          }, 5000);\r\n        })\r\n        .catch(error => {\r\n          props.setMessage({\r\n            type: \"error\",\r\n            msg: `${error.response.data.error}`\r\n          });\r\n          setTimeout(() => {\r\n            props.setMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <h2>add a new</h2>\r\n      <div>\r\n        name: <input value={newPerson.name} onChange={handleOnChangeName} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input value={newPerson.number} onChange={handleOnChangeNumber} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\nimport personService from \"../services/person\";\r\n\r\nconst Persons = ({\r\n  shownPersons,\r\n  setShownPersons,\r\n  setPersons,\r\n  persons,\r\n  setMessage\r\n}) => {\r\n  const handleOnClick = event => {\r\n    const id = event.target.id;\r\n    console.log(typeof id);\r\n    if (\r\n      window.confirm(\r\n        `Delete ${persons.filter(person => person.id === id)[0].name}?`\r\n      )\r\n    ) {\r\n      personService.remove(event.target.id).then(resp => {\r\n        setShownPersons(shownPersons.filter(person => person.id !== id));\r\n        setPersons(persons.filter(person => person.id !== id));\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Numbers</h2>\r\n      {shownPersons.map(person => (\r\n        <p key={person.id}>\r\n          {person.name} {person.number}\r\n          <button id={person.id} onClick={handleOnClick}>\r\n            delete\r\n          </button>\r\n        </p>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = props => {\r\n  const errorStyle = {\r\n    color: \"red\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  };\r\n  const successStyle = {\r\n    color: \"green\",\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  };\r\n  if (props.message === null) return null;\r\n  else if (props.message.type === \"error\")\r\n    return <div style={errorStyle}>{props.message.msg}</div>;\r\n  else if (props.message.type === \"success\")\r\n    return <div style={successStyle}>{props.message.msg}</div>;\r\n  else return null;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport SearchPerson from \"./SearchPerson\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\nimport personService from \"../services/person\";\nimport Notification from \"./Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [shownPersons, setShownPersons] = useState([]);\n  const [message, setMessage] = useState({\n    type: \"init\",\n    msg: \"initial message\"\n  });\n  useEffect(() => {\n    personService.getAll().then(allPersons => {\n      setPersons(allPersons);\n      setShownPersons(allPersons);\n    });\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <SearchPerson persons={persons} setShownPersons={setShownPersons} />\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        setShownPersons={setShownPersons}\n        setMessage={setMessage}\n      />\n      <Persons\n        shownPersons={shownPersons}\n        setShownPersons={setShownPersons}\n        setPersons={setPersons}\n        persons={persons}\n        setMessage={setMessage}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}